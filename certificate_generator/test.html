<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificate Generator</title>
    <link rel="stylesheet" href="styles.css">
    <script src = "https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js">
    </script>
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js">
    </script>
  </head>

  <!-- <body onload = "autoClick();"> -->
<body onload = "autoClick();">

    <!-- Place all certificate information here -->
    <h1>Certificate Info</h1>
    <ul>
        <li>Certification Type: <input type="text" id="cert_type"></li>
        <li>Name: <input type="text" id="user_name"></li>
        <li>Role: <input type="text" id="user_role"></li>
        <li>Event: <input type="text" id="event_name"></li>
        <li>Date:  <input type="date" id="event_date"></li>
        <li>QR Content: <input type="text" id="qrcode_input"/></li>
        <button id="btn_generate">Generate</button>
        <a id="download"><button id="btn_download">Download</button></a>
    </ul>
    

    <div class="certificate" id="certificateContent">
        <div class="main_body">
            <img src="template.png" alt=""> 
            <h1 class="user_fullname" id="user_fullname">Harold James Castillo</h1>
            <h1 class="event_title" id="event_title">UI/UX Design Workshop</h1>
        </div>
        <div class="footer">
            <img src="footer.png" alt="">
            <div id="qrcode" class="qrcode_img"></div>
        </div>
    </div> 
    <script src="certificate_generator.js"></script>
    <script type="text/javascript">
        
      function autoClick(){
        $("#download").click();
      }

      $(document).ready(function(){
        var element = $("#certificateContent");

        $("#download").on('click', function(){

          html2canvas(element, {
            onrendered: function(canvas) {
              var imageData = canvas.toDataURL("image/jpg");
              var newData = imageData.replace(/^data:image\/jpg/, "data:application/octet-stream");
              $("#download").attr("download", "image.jpg").attr("href", newData);
            }
          });

        });
      });
    </script>
    
  </body>
</html>